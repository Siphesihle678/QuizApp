<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 11 CAT - Microsoft Access Pre-Assessment Quiz</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.2em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
        }
        .student-info {
            background: #f8f9fa;
            padding: 25px;
            border-bottom: 1px solid #e9ecef;
        }
        .student-info h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #495057;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #007bff;
        }
        .quiz-content {
            padding: 30px;
        }
        .timer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #856404;
        }
        .question {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #007bff;
        }
        .question-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 15px;
        }
        .question-text {
            font-size: 1.1em;
            color: #2c3e50;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .option {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }
        .option:hover {
            border-color: #007bff;
            background: #f8f9fa;
        }
        .option input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.2);
        }
        .option label {
            cursor: pointer;
            font-size: 16px;
            color: #495057;
            flex: 1;
        }
        .submit-section {
            text-align: center;
            padding: 30px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }
        .submit-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
        }
        .submit-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .results {
            display: none;
            padding: 30px;
            text-align: center;
        }
        .score-display {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 25px;
        }
        .score-number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .score-text {
            font-size: 1.2em;
            opacity: 0.9;
        }
        .feedback {
            background: #e8f4fd;
            border: 1px solid #b3d9ff;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            transition: width 0.3s ease;
        }
        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            color: #721c24;
        }
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            .header {
                padding: 20px;
            }
            .header h1 {
                font-size: 1.8em;
            }
            .quiz-content {
                padding: 20px;
            }
            .question {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Microsoft Access Pre-Assessment Quiz</h1>
            <p>Grade 11 CAT - Database Concepts Evaluation</p>
            <p><strong>Time:</strong> 30 minutes | <strong>Questions:</strong> 25 multiple choice</p>
        </div>

        <div class="student-info">
            <h3>üìù Student Information</h3>
            <div class="form-group">
                <label for="studentName">Full Name:</label>
                <input type="text" id="studentName" name="studentName" required placeholder="Enter your full name">
            </div>
            <div class="form-group">
                <label for="studentEmail">Email Address:</label>
                <input type="email" id="studentEmail" name="studentEmail" required placeholder="Enter your email address">
            </div>
            <div class="form-group">
                <label for="studentGrade">Current Grade:</label>
                <select id="studentGrade" name="studentGrade" required>
                    <option value="">Select your grade</option>
                    <option value="11">Grade 11</option>
                    <option value="12">Grade 12</option>
                </select>
            </div>
        </div>

        <div class="quiz-content">
            <div class="timer" id="timer">
                Time Remaining: <span id="timeLeft">30:00</span>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>

            <form id="quizForm">
                <!-- Term 1 Questions -->
                <div class="question">
                    <div class="question-number">Question 1</div>
                    <div class="question-text">Which of the following is NOT a main database object in Microsoft Access?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q1" value="A" id="q1a">
                            <label for="q1a">A) Tables</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="B" id="q1b">
                            <label for="q1b">B) Forms</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="C" id="q1c">
                            <label for="q1c">C) Queries</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="D" id="q1d">
                            <label for="q1d">D) Worksheets</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 2</div>
                    <div class="question-text">What is the primary purpose of a database table?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q2" value="A" id="q2a">
                            <label for="q2a">A) To store data in rows and columns</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="B" id="q2b">
                            <label for="q2b">B) To create reports</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="C" id="q2c">
                            <label for="q2c">C) To design forms</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="D" id="q2d">
                            <label for="q2d">D) To write queries</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 3</div>
                    <div class="question-text">Which data type would you use for storing a person's age?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q3" value="A" id="q3a">
                            <label for="q3a">A) Text</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="B" id="q3b">
                            <label for="q3b">B) Number</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="C" id="q3c">
                            <label for="q3c">C) Date/Time</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="D" id="q3d">
                            <label for="q3d">D) Currency</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 4</div>
                    <div class="question-text">What is the purpose of a Primary Key in a database table?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q4" value="A" id="q4a">
                            <label for="q4a">A) To make the table look better</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="B" id="q4b">
                            <label for="q4b">B) To uniquely identify each record</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="C" id="q4c">
                            <label for="q4c">C) To store the most important data</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="D" id="q4d">
                            <label for="q4d">D) To make the table faster</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 5</div>
                    <div class="question-text">Which of the following is used to retrieve specific data from a database?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q5" value="A" id="q5a">
                            <label for="q5a">A) Form</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="B" id="q5b">
                            <label for="q5b">B) Query</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="C" id="q5c">
                            <label for="q5c">C) Report</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="D" id="q5d">
                            <label for="q5d">D) Table</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 6</div>
                    <div class="question-text">What does the logical operator "AND" do in a query?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q6" value="A" id="q6a">
                            <label for="q6a">A) It makes the query run faster</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="B" id="q6b">
                            <label for="q6b">B) It requires both conditions to be true</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="C" id="q6c">
                            <label for="q6c">C) It makes the query more complex</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="D" id="q6d">
                            <label for="q6d">D) It adds more fields to the result</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 7</div>
                    <div class="question-text">Which view in Microsoft Access allows you to see how data will look when printed?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q7" value="A" id="q7a">
                            <label for="q7a">A) Design View</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="B" id="q7b">
                            <label for="q7b">B) Print Preview</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="C" id="q7c">
                            <label for="q7c">C) Datasheet View</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="D" id="q7d">
                            <label for="q7d">D) Layout View</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 8</div>
                    <div class="question-text">What is the purpose of data validation in a database?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q8" value="A" id="q8a">
                            <label for="q8a">A) To make the database bigger</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="B" id="q8b">
                            <label for="q8b">B) To ensure data quality and accuracy</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="C" id="q8c">
                            <label for="q8c">C) To make the database faster</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="D" id="q8d">
                            <label for="q8d">D) To make the database more expensive</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 9</div>
                    <div class="question-text">Which function would you use to count the number of records in a query result?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q9" value="A" id="q9a">
                            <label for="q9a">A) SUM()</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="B" id="q9b">
                            <label for="q9b">B) COUNT()</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="C" id="q9c">
                            <label for="q9c">C) AVG()</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="D" id="q9d">
                            <label for="q9d">D) MAX()</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 10</div>
                    <div class="question-text">What is the main purpose of a database relationship?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q10" value="A" id="q10a">
                            <label for="q10a">A) To make the database look organized</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="B" id="q10b">
                            <label for="q10b">B) To connect related data across tables</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="C" id="q10c">
                            <label for="q10c">C) To make the database faster</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="D" id="q10d">
                            <label for="q10d">D) To reduce the file size</label>
                        </div>
                    </div>
                </div>

                <!-- Continue with remaining 15 questions... -->
                <!-- Questions 11-25 would be added here with similar structure -->

                <div class="submit-section">
                    <button type="submit" class="submit-btn" id="submitBtn">Submit Quiz</button>
                </div>
            </form>
        </div>

        <div class="results" id="results">
            <div class="score-display">
                <div class="score-number" id="scoreDisplay">0/25</div>
                <div class="score-text" id="scoreText">Loading...</div>
            </div>
            <div class="feedback" id="feedback">
                <h3>üìä Your Performance Summary</h3>
                <p id="feedbackText">Loading feedback...</p>
            </div>
        </div>
    </div>

    <script>
        // Quiz configuration
        const totalQuestions = 25;
        const timeLimit = 30 * 60; // 30 minutes in seconds
        let timeLeft = timeLimit;
        let timer;

        // Correct answers for all 25 questions
        const correctAnswers = {
            q1: 'D', q2: 'A', q3: 'B', q4: 'B', q5: 'B',
            q6: 'B', q7: 'B', q8: 'B', q9: 'B', q10: 'B',
            q11: 'B', q12: 'D', q13: 'B', q14: 'D', q15: 'B',
            q16: 'C', q17: 'B', q18: 'C', q19: 'B', q20: 'B',
            q21: 'B', q22: 'B', q23: 'A', q24: 'A', q25: 'B'
        };

        // Question topics for analysis
        const questionTopics = {
            q1: 'Database Objects',
            q2: 'Table Purpose',
            q3: 'Data Types',
            q4: 'Primary Keys',
            q5: 'Queries',
            q6: 'Logical Operators',
            q7: 'Views',
            q8: 'Data Validation',
            q9: 'Aggregate Functions',
            q10: 'Relationships',
            q11: 'Field Properties',
            q12: 'Forms',
            q13: 'Reports',
            q14: 'Import/Export',
            q15: 'Data Integrity',
            q16: 'JOINs',
            q17: 'Sorting',
            q18: 'Subqueries',
            q19: 'Calculations',
            q20: 'Formatting',
            q21: 'Problem Solving',
            q22: 'Integration',
            q23: 'Advanced Queries',
            q24: 'Database Design',
            q25: 'Best Practices'
        };

        // Initialize quiz
        document.addEventListener('DOMContentLoaded', function() {
            startTimer();
            updateProgress();
            
            // Add event listeners for progress tracking
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => {
                radio.addEventListener('change', updateProgress);
            });
        });

        // Timer functionality
        function startTimer() {
            timer = setInterval(function() {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    submitQuiz();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timeLeft').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateProgress() {
            const answered = document.querySelectorAll('input[type="radio"]:checked').length;
            const progress = (answered / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Form submission
        document.getElementById('quizForm').addEventListener('submit', function(e) {
            e.preventDefault();
            submitQuiz();
        });

        function submitQuiz() {
            clearInterval(timer);
            
            // Get student information
            const studentName = document.getElementById('studentName').value;
            const studentEmail = document.getElementById('studentEmail').value;
            const studentGrade = document.getElementById('studentGrade').value;
            
            if (!studentName || !studentEmail || !studentGrade) {
                alert('Please fill in all student information fields.');
                return;
            }

            // Calculate score
            let score = 0;
            let answered = 0;
            const answers = {};
            const incorrectAnswers = [];

            for (let i = 1; i <= totalQuestions; i++) {
                const questionName = `q${i}`;
                const selectedAnswer = document.querySelector(`input[name="${questionName}"]:checked`);
                
                if (selectedAnswer) {
                    answered++;
                    answers[questionName] = selectedAnswer.value;
                    
                    if (selectedAnswer.value === correctAnswers[questionName]) {
                        score++;
                    } else {
                        incorrectAnswers.push({
                            question: i,
                            topic: questionTopics[questionName],
                            studentAnswer: selectedAnswer.value,
                            correctAnswer: correctAnswers[questionName]
                        });
                    }
                }
            }

            const percentage = Math.round((score / totalQuestions) * 100);
            const timeUsed = timeLimit - timeLeft;

            // Prepare data for submission
            const quizData = {
                studentName: studentName,
                studentEmail: studentEmail,
                studentGrade: studentGrade,
                score: score,
                totalQuestions: totalQuestions,
                percentage: percentage,
                timeUsed: timeUsed,
                answers: answers,
                incorrectAnswers: incorrectAnswers,
                submissionTime: new Date().toISOString()
            };

            // Submit to backend
            submitToBackend(quizData);
        }

        function submitToBackend(quizData) {
            // Submit to Railway backend API
            fetch('/api/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(quizData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    console.log('Quiz submitted successfully');
                } else {
                    console.error('Error submitting quiz:', data.error);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                // Fallback to localStorage
                const submissions = JSON.parse(localStorage.getItem('quizSubmissions') || '[]');
                submissions.push(quizData);
                localStorage.setItem('quizSubmissions', JSON.stringify(submissions));
            });

            // Display results
            displayResults(quizData);
        }

        function displayResults(quizData) {
            // Hide quiz form
            document.getElementById('quizForm').style.display = 'none';
            document.querySelector('.student-info').style.display = 'none';
            document.querySelector('.timer').style.display = 'none';

            // Show results
            document.getElementById('results').style.display = 'block';

            // Update score display
            document.getElementById('scoreDisplay').textContent = `${quizData.score}/${quizData.totalQuestions}`;
            document.getElementById('scoreText').textContent = `${quizData.percentage}%`;

            // Generate feedback
            let feedbackText = '';
            if (quizData.percentage >= 80) {
                feedbackText = "Excellent! You have a strong foundation in database concepts. You're ready for advanced topics.";
            } else if (quizData.percentage >= 60) {
                feedbackText = "Good effort! You have a solid understanding of basic concepts, but there's room for improvement in some areas.";
            } else {
                feedbackText = "Keep practicing! Focus on understanding the fundamental concepts before moving to advanced topics.";
            }

            feedbackText += `<br><br><strong>Areas to focus on:</strong><br>`;
            if (quizData.incorrectAnswers.length > 0) {
                const topicsToReview = [...new Set(quizData.incorrectAnswers.map(item => item.topic))];
                feedbackText += topicsToReview.join(', ');
            } else {
                feedbackText += "All areas covered well!";
            }

            document.getElementById('feedbackText').innerHTML = feedbackText;
        }
    </script>
</body>
</html>
